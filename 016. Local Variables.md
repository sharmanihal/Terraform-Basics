
### **Local Variables in Terraform**

**Local variables** are used to store **reusable values** within the same module.
They’re like short-term variables — not meant to be passed from outside or output to others.

---

#### **When to use locals**

Use them when:

* You want to **avoid repeating values** in your Terraform code.
* You **don’t need external input** (like CLI, `.tfvars`, etc.).
* You want to **simplify expressions** or make code more readable.

---

#### **Syntax**

```hcl
locals {
  http_port = 8080
  app_name  = "web-app"
}
```

You can reference them using the `local` namespace:

```hcl
resource "aws_instance" "web" {
  ami           = "ami-123456"
  instance_type = "t2.micro"
  tags = {
    Name = local.app_name
  }
  user_data = "Starting app on port ${local.http_port}"
}
```

---

✅ **Key Differences from Input Variables**

| Feature      | Input Variable                    | Local Variable                   |
| ------------ | --------------------------------- | -------------------------------- |
| Source       | External (user, CLI, env, tfvars) | Internal (within code)           |
| Overridable  | Yes                               | No                               |
| Purpose      | Parameterize configuration        | Simplify code / avoid repetition |
| Accessed via | `var.`                            | `local.`                         |

---

**Example Use Case**

```hcl
locals {
  app_tag_name = "demo-app"
  common_tags  = {
    Environment = "dev"
    Owner       = "teamA"
  }
}

resource "aws_s3_bucket" "bucket" {
  bucket = "${local.app_tag_name}-bucket"
  tags   = local.common_tags
}
```

➡️ Output bucket name: `demo-app-bucket`
➡️ Tags applied: `{ Environment = "dev", Owner = "teamA" }`
