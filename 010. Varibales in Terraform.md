
### **Terraform Variables & VPC (Beginner Friendly Explanation)**

#### **1. What is Terraform?**

Terraform uses **HCL (HashiCorp Configuration Language)** to represent infrastructure as code.
You write `.tf` files that describe cloud resources — like servers, networks, databases — and Terraform creates them for you.

---

### **2. Basic Terraform Block Example**

Each Terraform block defines an infrastructure object.

```hcl
resource "aws_instance" "app_server" {
  ami  = "ami-123456"
  tags = {
    Name = "app"
  }
}

resource "aws_vpc" "app_vpc" {
  cidr_block = "10.0.0.0/16"
  tags = {
    Name = "app"
  }
}
```

Here:

* `resource` = Block type
* `"aws_instance"` / `"aws_vpc"` = Resource type
* `"app_server"` / `"app_vpc"` = Resource name
* Inside `{}` is the **body** defining attributes.

---

### **3. What is a VPC? (Very Beginner Friendly)**

Think of **VPC (Virtual Private Cloud)** as your own **private network** inside AWS.

When you create AWS resources (like EC2 servers or databases), they all live inside a VPC.
A VPC decides **who can talk to whom** and **who can access the internet**.

#### Example:

Imagine your house has several rooms:

* **VPC** = The whole house
* **Subnet** = Each room inside the house
* **EC2 instances** = People in each room

You can decide:

* Which rooms are connected (communication allowed).
* Which rooms have doors to the outside (internet access).
* Which rooms are private (no internet).

AWS gives you a **default VPC** so you can quickly start creating resources, but in real-world projects, people create their **own custom VPCs** for better control and isolation.

---

### **4. Using Variables (to follow DRY principle)**

Instead of repeating values like tag names or regions, you define them once as **variables**.

#### Example:

```hcl
variable "app_tag_name" {
  description = "Value of Name tag for all resources"
  type        = string
  default     = "app"
}

resource "aws_instance" "app_server" {
  ami  = "ami-123456"
  tags = {
    Name = var.app_tag_name
  }
}

resource "aws_vpc" "app_vpc" {
  cidr_block = "10.0.0.0/16"
  tags = {
    Name = var.app_tag_name
  }
}
```

Now, if you change `default = "app"` to `default = "myapp"`, both resources get updated automatically.

---

### **5. Input Variable Parameters**

| Parameter     | Description                                                       |
| ------------- | ----------------------------------------------------------------- |
| `default`     | Optional value. If not given, Terraform asks for it at runtime.   |
| `type`        | Data type of the variable (string, number, bool, list, map, etc.) |
| `description` | Explains what the variable is used for.                           |
| `validation`  | Adds a custom rule to check valid values.                         |
| `sensitive`   | Hides value from terminal output (useful for passwords).          |
| `nullable`    | If `false`, variable must not be null.                            |

---

### **6. Example with Validation**

```hcl
variable "image_id" {
  type        = string
  description = "AMI ID for EC2 instance"

  validation {
    condition     = length(var.image_id) > 4 && substr(var.image_id, 0, 4) == "ami-"
    error_message = "Must be a valid AMI ID starting with 'ami-'"
  }
}
```

If no default value is set, Terraform will **prompt you in the console** for the value when you run `terraform plan`.

That’s why these are called **input variables** — they accept input values from the user.


Ways to pass variables in Terraform:

1. **Default value** – set in variable block.
2. **CLI argument** – `terraform plan -var="region=us-west-2"`.
3. **.tfvars file** – define vars in a file, use `-var-file="dev.tfvars"`.(will learn later)
4. **Environment variable** – `export TF_VAR_region="us-east-2"`.

**Priority (lowest → highest):**
Default < tfvars < env var < CLI `-var`.
