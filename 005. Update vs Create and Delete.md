
### **Understanding Terraform Change Types**

Not all updates in Terraform are simple *modifications*.
Some changes cause Terraform to **recreate** a resource instead of just updating it.

---

#### **1. Example: Changing AMI of an AWS Instance**

If you modify the AMI (e.g., from Ubuntu to Windows):

```hcl
resource "aws_instance" "app_server" {
  ami           = "ami-new-windows"
  instance_type = "t2.micro"
}
```

and then run:

```bash
terraform plan
```

Terraform will show something like:

```
Plan: 1 to add, 0 to change, 1 to destroy
```

* This means:

  * Terraform **cannot modify** the AMI of an existing instance directly.
  * So it will **destroy** the old instance and **create a new one** with the new AMI.
* Reason: Some attributes (like `ami`, `name`, etc.) are **immutable** â€” they require recreation.

---

#### **2. Example: Changing the Name of a GCP Storage Bucket**

**Old:**

```hcl
resource "google_storage_bucket" "static-site" {
  name          = "image-store.com"
  location      = "EU"
  force_destroy = true
}
```

**New:**

```hcl
resource "google_storage_bucket" "static-site" {
  name          = "imybucket.com"
  location      = "EU"
  force_destroy = true
}
```

If you run `terraform plan`, it will again show:

```
Plan: 1 to add, 0 to change, 1 to destroy
```

* The **bucket name** is an immutable field in GCP.
* Terraform will **delete** the old bucket and **create** a new one with the new name.
* Any **data in the old bucket will be lost**, unless you back it up manually before applying.

---

#### **3. Key Takeaway**

| Change Type         | Terraform Action         | Example                     |
| ------------------- | ------------------------ | --------------------------- |
| Mutable attribute   | In-place modification    | Changing instance type      |
| Immutable attribute | Destroy old + create new | Changing AMI or bucket name |

